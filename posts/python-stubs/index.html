<!DOCTYPE html>
<html>
  <head>
    
    
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      
  Python Stubs &ndash; DevOps journey

    </title>
    
    <meta content="python, stubs, typed" name="keywords">
    
    
    <meta name="description" property="og:description" content="What is a stub file? It is a file with the .pyi extension, which describes the Python type information, both input and return for functions and omits the logical part. Using a stub file has the following advantages (see PEP 484).
Example sample.py
def stringify(what): return str(what) Example sample.pyi
from typing import Union def stringify(what: Union[int, list, dict]) -&amp;gt; str: ... Advantages Type information can be added by adding a separate stub file to a third-party library that does not have type annotations.|">
    

    <meta name="apple-mobile-web-app-title" content="DevOps journey">
    
    
    <link rel="icon" href="https://matteoguadrini.github.iofavicon-64.png">
    <link rel="apple-touch-icon" href="https://matteoguadrini.github.ioapple-touch-icon.png">
    <link rel="mask-icon" size="any" href="https://matteoguadrini.github.iopinned-icon.svg">
    
    
    


    <link rel="stylesheet" href="/assets/syntax.css">
    <link rel="stylesheet" href="/assets/primer-build.css">
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/custom_style.css">
  </head>


  <body class="bg-gray">
    <div id="holy" class="container-lg bg-white h-100">

      <div id="header" class="px-1 bg-white">
        <nav class="UnderlineNav UnderlineNav--right px-2">
  <a class="UnderlineNav-actions muted-link h2" href="https://matteoguadrini.github.io">
    DevOps journey
  </a>

  
  
  <div class="UnderlineNav-body">
    
    
    
    <a class="UnderlineNav-item" href="/about/">
      
      <span>About</span>
    </a>
    
    
    
    
    <a class="UnderlineNav-item" href="/tools/">
      
      <span>Tools</span>
    </a>
    
    
  </div>
  
</nav>

      </div>

      <div role="main" id="main" class="holy-main markdown-body px-4 bg-white">
        

<div class="Subhead">
  <div class="Subhead-heading">
    <div class="h1 mt-3 mb-1">Python Stubs</div>
  </div>
  <div class="Subhead-description">
    


<a href='/categories/develop' class="muted-link">
  <span class="Label Label--gray-darker">Develop</span>
</a>



<a href='/tags/python' class="muted-link">
  <span class="Label Label--gray">Python</span>
</a>



    
    <div class="float-md-right">
      <span title="Lastmod: 2021-10-16. Published at: 2021-10-16.">
        
          Published: 2021-10-16
        
      </span>
    </div>
    
  </div>
</div>
<article>
  
  <section class="pb-6 mb-3 border-bottom">
    <p><img src="https://cdn.journaldev.com/wp-content/uploads/2020/01/typing-module.png" alt="Python stub"></p>
<h2 id="what-is-a-stub-file">What is a stub file?</h2>
<p>It is a file with the <code>.pyi</code> extension, which describes the Python type information, both input and return for functions and omits the logical part. Using a <strong>stub</strong> file has the following advantages (see <a href="https://www.python.org/dev/peps/pep-0484">PEP 484</a>).</p>
<p>Example sample.py</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">stringify</span><span class="p">(</span><span class="n">what</span><span class="p">):</span>
	<span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">what</span><span class="p">)</span>
</code></pre></div><p>Example sample.pyi</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span>
<span class="k">def</span> <span class="nf">stringify</span><span class="p">(</span><span class="n">what</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span> <span class="o">...</span>
</code></pre></div><h3 id="advantages">Advantages</h3>
<p><em>Type</em> information can be added by adding a separate stub file to a third-party library that does not have type annotations. For large modules that have a high load when many type inferences are made, using the minimal stub file that omits the mounting part reduces the load and reduces delays such as completion and check.</p>
<h3 id="disadvantage">Disadvantage</h3>
<p>Since the type information definition is overwritten in the original module stub file, it is not preferred in case the project code is updated <em>frequently</em> because it deviates from the module content.</p>
<h2 id="why-did-you-start-using-stub-files">Why did you start using stub files?</h2>
<p>Python was born as a <em>dynamically typed language</em>. Therefore it is not necessary to specify what the type of a variable or object is. Using stub files in a python library can be a way to help the end developer use the right types without forcing them. This is a good way for both of us. Additionally, stub files reduce the processing time of editors checking the types of a given function.</p>
<h2 id="auto-generate-stub-file">Auto-generate stub file</h2>
<p>Mypy includes the <code>stubgen</code> tool that can automatically generate stub files (<em>.pyi</em> files) for Python modules and C extension modules.</p>
<p><em>Stubgen</em> generates draft stubs. The auto-generated stub files often require some manual updates, and most types will default to Any. The stubs will be much more useful if you add more precise type annotations, at least for the most commonly used functionality.</p>
<p>The rest of this section documents the command line interface of stubgen. Run <code>stubgen --help</code> for a quick summary of options.</p>
<p>Generate stub file of sample.py</p>
<pre><code class="language-console" data-lang="console">$ stubgen sample.py
$ ls
sample.py sample.pyi
</code></pre><h2 id="conclusion">Conclusion</h2>
<p>Having a package that contains stub files guarantees two things: the first is that you keep your modules without typing anything, so it is compliant with the python philosophy of not declaring types of functions and variables. The second is to speed up the editors and ide in resolving types.</p>
<p>Stub files are really a great ally to help you use your library.</p>

  </section>

  <section>
    
      
    
  </section>
</article>

      </div>

      <div id="side" class="pr-1 bg-white">
        <aside class="pr-3">
          
  
    <div id="toc" class="Box Box--blue mb-3">
      <b>Python Stubs</b><nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-a-stub-file">What is a stub file?</a>
      <ul>
        <li><a href="#advantages">Advantages</a></li>
        <li><a href="#disadvantage">Disadvantage</a></li>
      </ul>
    </li>
    <li><a href="#why-did-you-start-using-stub-files">Why did you start using stub files?</a></li>
    <li><a href="#auto-generate-stub-file">Auto-generate stub file</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></div>
  

  
    
    
      <div>
        
          <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        

        
          <iframe src="https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&layout=button&size=small&mobile_iframe=true&width=61&height=20&appId" width="61" height="20" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe>
        

        

        
          <a data-pocket-label="pocket" data-pocket-count="none" class="pocket-btn" data-lang="en"></a>
          <script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
        

      </div>
    
  

        </aside>
      </div>

      <div id="footer" class="pt-2 pb-3 bg-white text-center">
        

  <span class="text-small text-gray">
    Â© Matteo Guadrini &middot; 

    Powered by the
    <a href="https://github.com/qqhann/hugo-primer" class="link-gray-dark">Hugo-Primer</a> theme for
    <a href="https://gohugo.io" class="link-gray-dark">Hugo</a>.
  </span>


      </div>
    </div>

    
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>
    
  </body>
</html>
